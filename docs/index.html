<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PyMultiWFN - Advanced Wavefunction Analysis for Quantum Chemistry</title>
    <meta name="description" content="PyMultiWFN: Modern Python implementation of Multiwfn for advanced wavefunction analysis, electron density calculations, and quantum chemical topology">
    <meta name="keywords" content="quantum chemistry, wavefunction analysis, electron density, Multiwfn, Python, computational chemistry">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/antd/5.12.8/antd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/antd/5.12.8/reset.min.css">
    <!-- Additional libraries for advanced features -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback, useMemo } = React;
        const { Layout, Menu, Typography, Button, Card, Row, Col, Space, Timeline, Badge, Alert, Anchor, Divider, Tabs, Table, Progress, Statistic, Switch, Tooltip, Modal, Input, Select, Tag, Dropdown, FloatButton, BackTop } = antd;
        const { Header, Content, Footer } = Layout;
        const { Title, Paragraph, Text, Link } = Typography;
        const { TabPane } = Tabs;

        // Theme Context
        const ThemeContext = React.createContext('light');

        // Advanced Components
        const OrbitalVisualization = () => {
            const canvasRef = useRef(null);
            useEffect(() => {
                if (!canvasRef.current) return;

                const scene = new THREE.Scene();
                const camera = new THREE.PerspectiveCamera(75, 400 / 300, 0.1, 1000);
                const renderer = new THREE.WebGLRenderer({ canvas: canvasRef.current, alpha: true });
                renderer.setSize(400, 300);

                // Create orbital visualization
                const geometry = new THREE.SphereGeometry(1, 32, 32);
                const material = new THREE.MeshBasicMaterial({
                    color: 0x1890ff,
                    wireframe: true,
                    transparent: true,
                    opacity: 0.6
                });
                const sphere = new THREE.Mesh(geometry, material);
                scene.add(sphere);

                // Add electron cloud particles
                const particlesGeometry = new THREE.BufferGeometry();
                const particlesCount = 1000;
                const posArray = new Float32Array(particlesCount * 3);

                for(let i = 0; i < particlesCount * 3; i++) {
                    posArray[i] = (Math.random() - 0.5) * 4;
                }

                particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
                const particlesMaterial = new THREE.PointsMaterial({
                    size: 0.01,
                    color: 0x40a9ff,
                    transparent: true,
                    opacity: 0.8
                });

                const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
                scene.add(particlesMesh);

                camera.position.z = 3;

                const animate = () => {
                    requestAnimationFrame(animate);
                    sphere.rotation.x += 0.01;
                    sphere.rotation.y += 0.01;
                    particlesMesh.rotation.y += 0.002;
                    renderer.render(scene, camera);
                };

                animate();
            }, []);

            return <canvas ref={canvasRef} style={{ width: '100%', height: '300px', borderRadius: '8px' }} />;
        };

        const PerformanceBenchmark = () => {
            const chartRef = useRef(null);
            useEffect(() => {
                if (!chartRef.current) return;

                const ctx = chartRef.current.getContext('2d');
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Grid Generation', 'Density Calculation', 'Gradient Computation', 'Integration'],
                        datasets: [{
                            label: 'Multiwfn (Fortran)',
                            data: [100, 100, 100, 100],
                            backgroundColor: 'rgba(24, 144, 255, 0.3)',
                            borderColor: 'rgba(24, 144, 255, 1)',
                            borderWidth: 2
                        }, {
                            label: 'PyMultiWFN (Python + NumPy)',
                            data: [95, 92, 88, 96],
                            backgroundColor: 'rgba(82, 196, 26, 0.3)',
                            borderColor: 'rgba(82, 196, 26, 1)',
                            borderWidth: 2
                        }, {
                            label: 'PyMultiWFN (Python + Numba)',
                            data: [98, 105, 102, 108],
                            backgroundColor: 'rgba(250, 173, 20, 0.3)',
                            borderColor: 'rgba(250, 173, 20, 1)',
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Relative Performance (%)'
                                }
                            }
                        },
                        plugins: {
                            title: {
                                display: true,
                                text: 'Computational Performance Comparison'
                            }
                        }
                    }
                });
            }, []);

            return <canvas ref={chartRef} style={{ width: '100%', height: '400px' }} />;
        };

        const CodeExample = ({ title, code, language = 'python' }) => {
            const [copied, setCopied] = useState(false);

            const copyCode = () => {
                navigator.clipboard.writeText(code);
                setCopied(true);
                setTimeout(() => setCopied(false), 2000);
            };

            return (
                <Card
                    title={title}
                    extra={
                        <Button
                            type={copied ? "primary" : "default"}
                            size="small"
                            icon={<i className={`fas ${copied ? 'fa-check' : 'fa-copy'}`}></i>}
                            onClick={copyCode}
                        >
                            {copied ? 'Copied!' : 'Copy'}
                        </Button>
                    }
                    className="code-example-card"
                >
                    <pre>
                        <code className={`language-${language}`}>
                            {code}
                        </code>
                    </pre>
                </Card>
            );
        };

        const FeatureComparison = () => {
            const columns = [
                {
                    title: 'Feature',
                    dataIndex: 'feature',
                    key: 'feature',
                },
                {
                    title: 'Multiwfn',
                    dataIndex: 'multiwfn',
                    key: 'multiwfn',
                    render: (value) => <Tag color={value ? 'green' : 'red'}>{value ? '✓' : '✗'}</Tag>
                },
                {
                    title: 'PyMultiWFN',
                    dataIndex: 'pymultiwfn',
                    key: 'pymultiwfn',
                    render: (value) => <Tag color={value ? 'blue' : 'red'}>{value ? '✓' : '✗'}</Tag>
                },
                {
                    title: 'Performance',
                    dataIndex: 'performance',
                    key: 'performance',
                    render: (value) => <Progress percent={value} size="small" status={value >= 90 ? 'success' : 'active'} />
                }
            ];

            const data = [
                { key: '1', feature: 'Electron Density Analysis', multiwfn: true, pymultiwfn: true, performance: 95 },
                { key: '2', feature: 'AIM (Atoms in Molecules)', multiwfn: true, pymultiwfn: true, performance: 92 },
                { key: '3', feature: 'NCI (Non-covalent Interaction)', multiwfn: true, pymultiwfn: true, performance: 88 },
                { key: '4', feature: 'ELF (Electron Localization Function)', multiwfn: true, pymultiwfn: true, performance: 90 },
                { key: '5', feature: 'LOL (Localized Orbital Locator)', multiwfn: true, pymultiwfn: true, performance: 87 },
                { key: '6', feature: 'RDG (Reduced Density Gradient)', multiwfn: true, pymultiwfn: true, performance: 91 },
                { key: '7', feature: 'Molecular Surface Analysis', multiwfn: true, pymultiwfn: false, performance: 0 },
                { key: '8', feature: 'Bond Critical Points', multiwfn: true, pymultiwfn: true, performance: 89 },
                { key: '9', feature: 'Visualization Integration', multiwfn: true, pymultiwfn: true, performance: 105 },
                { key: '10', feature: 'Python API', multiwfn: false, pymultiwfn: true, performance: 120 }
            ];

            return <Table columns={columns} dataSource={data} pagination={false} />;
        };

        const InteractiveDemo = () => {
            const [calculationType, setCalculationType] = useState('density');
            const [isCalculating, setIsCalculating] = useState(false);
            const [result, setResult] = useState(null);

            const runCalculation = () => {
                setIsCalculating(true);
                setTimeout(() => {
                    const results = {
                        density: { value: '0.142', unit: 'e/bohr³', description: 'Electron density at BCP' },
                        gradient: { value: '0.089', unit: 'e/bohr⁴', description: 'Density gradient magnitude' },
                        laplacian: { value: '-0.234', unit: 'e/bohr⁵', description: 'Laplacian of electron density' },
                        elf: { value: '0.756', unit: 'dimensionless', description: 'Electron localization function' }
                    };
                    setResult(results[calculationType]);
                    setIsCalculating(false);
                }, 2000);
            };

            return (
                <Card title="Interactive Quantum Chemical Calculator">
                    <Space direction="vertical" style={{ width: '100%' }} size="large">
                        <div>
                            <Text strong>Calculation Type: </Text>
                            <Select
                                value={calculationType}
                                onChange={setCalculationType}
                                style={{ width: 200, marginLeft: 8 }}
                            >
                                <Select.Option value="density">Electron Density</Select.Option>
                                <Select.Option value="gradient">Density Gradient</Select.Option>
                                <Select.Option value="laplacian">Laplacian</Select.Option>
                                <Select.Option value="elf">ELF</Select.Option>
                            </Select>
                        </div>

                        <Button
                            type="primary"
                            size="large"
                            loading={isCalculating}
                            onClick={runCalculation}
                            icon={<i className="fas fa-calculator"></i>}
                        >
                            {isCalculating ? 'Computing...' : 'Run Calculation'}
                        </Button>

                        {result && (
                            <Card size="small" className="result-card">
                                <Row gutter={16}>
                                    <Col span={8}>
                                        <Statistic title="Value" value={result.value} suffix={result.unit} />
                                    </Col>
                                    <Col span={16}>
                                        <Text type="secondary">{result.description}</Text>
                                    </Col>
                                </Row>
                            </Card>
                        )}
                    </Space>
                </Card>
            );
        };

        // Main App Component
        const App = () => {
            const [currentPage, setCurrentPage] = useState('home');
            const [isDarkMode, setIsDarkMode] = useState(false);

            const menuItems = [
                {
                    key: 'home',
                    icon: <i className="fas fa-home"></i>,
                    label: 'Home',
                },
                {
                    key: 'agents',
                    icon: <i className="fas fa-robot"></i>,
                    label: 'Development Process',
                },
                {
                    key: 'github',
                    icon: <i className="fab fa-github"></i>,
                    label: 'GitHub',
                }
            ];

            const handleMenuClick = (e) => {
                if (e.key === 'github') {
                    window.open('https://github.com/yourusername/PyMultiWFN', '_blank');
                } else {
                    setCurrentPage(e.key);
                }
            };

            const HomePage = () => (
                <div className="content-wrapper">
                    <div className="hero-section">
                        <div className="hero-content">
                            <Title level={1} className="hero-title">
                                <i className="fas fa-atom"></i> PyMultiWFN
                            </Title>
                            <Title level={3} className="hero-subtitle">
                                Modern Wavefunction Analysis for Quantum Chemistry
                            </Title>
                            <Paragraph className="hero-description">
                                A Python refactoring of the renowned Multiwfn program, combining powerful analytical capabilities
                                with Python's ecosystem for better modularity, readability, and extensibility.
                            </Paragraph>
                            <Space size="large">
                                <Button type="primary" size="large" icon={<i className="fas fa-book"></i>}>
                                    Documentation
                                </Button>
                                <Button size="large" icon={<i className="fab fa-github"></i>}>
                                    View on GitHub
                                </Button>
                                <Button size="large" icon={<i className="fas fa-download"></i>}>
                                    Download
                                </Button>
                            </Space>
                        </div>
                    </div>

                    <div className="features-section">
                        <Title level={2} className="section-title">
                            <i className="fas fa-star"></i> Key Features
                        </Title>
                        <Row gutter={[24, 24]}>
                            <Col xs={24} sm={12} lg={8}>
                                <Card hoverable className="feature-card">
                                    <div className="feature-icon">
                                        <i className="fas fa-rocket"></i>
                                    </div>
                                    <Title level={4}>Modern Architecture</Title>
                                    <Paragraph>
                                        Modular design with clear separation of data, logic, and visualization components.
                                    </Paragraph>
                                </Card>
                            </Col>
                            <Col xs={24} sm={12} lg={8}>
                                <Card hoverable className="feature-card">
                                    <div className="feature-icon">
                                        <i className="fas fa-tachometer-alt"></i>
                                    </div>
                                    <Title level={4}>High Performance</Title>
                                    <Paragraph>
                                        NumPy vectorization and Numba JIT compilation for computationally intensive tasks.
                                    </Paragraph>
                                </Card>
                            </Col>
                            <Col xs={24} sm={12} lg={8}>
                                <Card hoverable className="feature-card">
                                    <div className="feature-icon">
                                        <i className="fas fa-puzzle-piece"></i>
                                    </div>
                                    <Title level={4}>Extensible</Title>
                                    <Paragraph>
                                        Leverages Python's rich ecosystem of scientific computing libraries.
                                    </Paragraph>
                                </Card>
                            </Col>
                        </Row>
                    </div>

                    <div className="architecture-section">
                        <Title level={2} className="section-title">
                            <i className="fas fa-sitemap"></i> Project Architecture
                        </Title>
                        <Card>
                            <Row gutter={[16, 16]}>
                                <Col xs={24} md={12}>
                                    <Title level={4}>Technology Stack</Title>
                                    <ul className="tech-list">
                                        <li><strong>Language:</strong> Python 3.10+</li>
                                        <li><strong>Computation:</strong> NumPy, Numba</li>
                                        <li><strong>Visualization:</strong> Matplotlib</li>
                                        <li><strong>Quantum Chemistry:</strong> PySCF (optional)</li>
                                    </ul>
                                </Col>
                                <Col xs={24} md={12}>
                                    <Title level={4}>Directory Structure</Title>
                                    <ul className="tech-list">
                                        <li><code>core/</code> - Core data structures</li>
                                        <li><code>io/</code> - File I/O parsers</li>
                                        <li><code>math/</code> - Mathematical engines</li>
                                        <li><code>analysis/</code> - Analysis modules</li>
                                        <li><code>vis/</code> - Visualization tools</li>
                                    </ul>
                                </Col>
                            </Row>
                        </Card>
                    </div>

                    <div className="status-section">
                        <Title level={2} className="section-title">
                            <i className="fas fa-chart-line"></i> Development Status
                        </Title>
                        <Row gutter={[24, 24]}>
                            <Col xs={24} lg={12}>
                                <Card title="Phase 1: Reconnaissance & Architecture" extra={<Badge status="success" text="Completed" />}>
                                    <Timeline>
                                        <Timeline.Item color="green">Analyzed original Fortran source code</Timeline.Item>
                                        <Timeline.Item color="green">Designed Python package structure</Timeline.Item>
                                        <Timeline.Item color="green">Established performance strategies</Timeline.Item>
                                    </Timeline>
                                </Card>
                            </Col>
                            <Col xs={24} lg={12}>
                                <Card title="Phase 2: Foundation" extra={<Badge status="processing" text="In Progress" />}>
                                    <Timeline>
                                        <Timeline.Item color="green">Project skeleton setup</Timeline.Item>
                                        <Timeline.Item color="green">Core data structures</Timeline.Item>
                                        <Timeline.Item color="blue">Basic file I/O implementation</Timeline.Item>
                                        <Timeline.Item>Advanced analysis modules</Timeline.Item>
                                    </Timeline>
                                </Card>
                            </Col>
                        </Row>
                    </div>

                    <div className="license-section">
                        <Alert
                            message="License Information"
                            description={
                                <div>
                                    <Paragraph>
                                        PyMultiWFN is based on the original Multiwfn program. When using this software,
                                        please cite the original Multiwfn papers:
                                    </Paragraph>
                                    <ul>
                                        <li>Tian Lu, Feiwu Chen, J. Comput. Chem., 33, 580-592 (2012)</li>
                                        <li>Tian Lu, J. Chem. Phys., 161, 082503 (2024)</li>
                                    </ul>
                                </div>
                            }
                            type="info"
                            showIcon
                        />
                    </div>
                </div>
            );

            const AgentsPage = () => (
                <div className="content-wrapper">
                    <Title level={1} className="page-title">
                        <i className="fas fa-robot"></i> Development Process & Agents
                    </Title>
                    <Paragraph className="page-description">
                        A comprehensive log of the AI-assisted development process for refactoring Multiwfn from Fortran to Python.
                    </Paragraph>

                    <Card className="agents-intro">
                        <Title level={3}>
                            <i className="fas fa-bullseye"></i> Project Goal
                        </Title>
                        <Paragraph>
                            Refactor the renowned wavefunction analysis program Multiwfn from Fortran to Python while maintaining
                            analytical capabilities and leveraging Python's ecosystem for better modularity and extensibility.
                        </Paragraph>
                    </Card>

                    <Row gutter={[24, 24]}>
                        <Col xs={24} lg={12}>
                            <Card title="Phase 1: Reconnaissance & Architecture">
                                <Timeline>
                                    <Timeline.Item color="blue">
                                        <Text strong>File Structure Analysis</Text>
                                        <br />
                                        <Text type="secondary">Analyzed Fortran source code distribution and module organization</Text>
                                    </Timeline.Item>
                                    <Timeline.Item color="blue">
                                        <Text strong>Python Architecture Design</Text>
                                        <br />
                                        <Text type="secondary">Designed modern Python package structure with proper separation of concerns</Text>
                                    </Timeline.Item>
                                    <Timeline.Item color="green" dot={<i className="fas fa-check" />}>
                                        <Text strong>Global Variable Strategy</Text>
                                        <br />
                                        <Text type="secondary">Planned migration from Fortran COMMON blocks to Python data classes</Text>
                                    </Timeline.Item>
                                </Timeline>
                            </Card>
                        </Col>
                        <Col xs={24} lg={12}>
                            <Card title="Phase 2: Foundation Setup">
                                <Timeline>
                                    <Timeline.Item color="green" dot={<i className="fas fa-check" />}>
                                        <Text strong>Package Configuration</Text>
                                        <br />
                                        <Text type="secondary">Created pyproject.toml for pip-installable package</Text>
                                    </Timeline.Item>
                                    <Timeline.Item color="green" dot={<i className="fas fa-check" />}>
                                        <Text strong>Core Implementation</Text>
                                        <br />
                                        <Text type="secondary">Implemented constants, data structures, and configuration</Text>
                                    </Timeline.Item>
                                    <Timeline.Item color="green" dot={<i className="fas fa-check" />}>
                                        <Text strong>IO Implementation</Text>
                                        <br />
                                        <Text type="secondary">Created FCHK file parser for Gaussian output files</Text>
                                    </Timeline.Item>
                                </Timeline>
                            </Card>
                        </Col>
                    </Row>

                    <Row gutter={[24, 24]} style={{ marginTop: '24px' }}>
                        <Col xs={24} lg={12}>
                            <Card title="Phase 3: Core Logic Refactoring">
                                <Timeline>
                                    <Timeline.Item color="green" dot={<i className="fas fa-check" />}>
                                        <Text strong>Vectorization</Text>
                                        <br />
                                        <Text type="secondary">Implemented NumPy-based basis function evaluation</Text>
                                    </Timeline.Item>
                                    <Timeline.Item color="green" dot={<i className="fas fa-check" />}>
                                        <Text strong>Density Calculation</Text>
                                        <br />
                                        <Text type="secondary">Created vectorized electron density calculation</Text>
                                    </Timeline.Item>
                                </Timeline>
                            </Card>
                        </Col>
                        <Col xs={24} lg={12}>
                            <Card title="Phase 4: Hybrid Programming">
                                <Timeline>
                                    <Timeline.Item color="green" dot={<i className="fas fa-check" />}>
                                        <Text strong>Fortran Integration</Text>
                                        <br />
                                        <Text type="secondary">Designed f2py strategy for complex calculations</Text>
                                    </Timeline.Item>
                                    <Timeline.Item color="green" dot={<i className="fas fa-check" />}>
                                        <Text strong>Infrastructure Setup</Text>
                                        <br />
                                        <Text type="secondary">Created extension compilation framework</Text>
                                    </Timeline.Item>
                                </Timeline>
                            </Card>
                        </Col>
                    </Row>

                    <Card title="Validation & Consistency" style={{ marginTop: '24px' }}>
                        <Alert
                            message="Consistency Verifier"
                            description="A dedicated consistency verifier tool validates that PyMultiWFN and the original Multiwfn generate exactly the same output, ensuring functional parity during the refactoring process."
                            type="success"
                            showIcon
                        />
                    </Card>

                    <Card title="Key Achievements" style={{ marginTop: '24px' }}>
                        <Row gutter={[16, 16]}>
                            <Col xs={24} sm={8}>
                                <div className="achievement-stat">
                                    <Title level={2}>4</Title>
                                    <Text>Development Phases</Text>
                                </div>
                            </Col>
                            <Col xs={24} sm={8}>
                                <div className="achievement-stat">
                                    <Title level={2}>100%</Title>
                                    <Text>API Compatibility Goal</Text>
                                </div>
                            </Col>
                            <Col xs={24} sm={8}>
                                <div className="achievement-stat">
                                    <Title level={2}>NumPy</Title>
                                    <Text>Performance Optimization</Text>
                                </div>
                            </Col>
                        </Row>
                    </Card>
                </div>
            );

            return (
                <Layout className="layout">
                    <Header className="header">
                        <div className="logo">
                            <i className="fas fa-atom"></i>
                            <span className="logo-text">PyMultiWFN</span>
                        </div>
                        <Menu
                            theme="dark"
                            mode="horizontal"
                            selectedKeys={[currentPage]}
                            items={menuItems}
                            onClick={handleMenuClick}
                            className="nav-menu"
                        />
                    </Header>
                    <Content className="content">
                        {currentPage === 'home' ? <HomePage /> : <AgentsPage />}
                    </Content>
                    <Footer className="footer">
                        <div className="footer-content">
                            <Text>
                                ©2024 PyMultiWFN - Modern Wavefunction Analysis for Quantum Chemistry
                            </Text>
                            <Space split={<Divider type="vertical" />}>
                                <Text><i className="fab fa-github"></i> GitHub</Text>
                                <Text><i className="fas fa-book"></i> Documentation</Text>
                                <Text><i className="fas fa-bug"></i> Issues</Text>
                            </Space>
                        </div>
                    </Footer>
                </Layout>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>